<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>‡πÄ‡∏Å‡∏°‡∏Ñ‡∏≥‡∏£‡∏≤‡∏ä‡∏≤‡∏®‡∏±‡∏û‡∏ó‡πå</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap');
    body { font-family: 'Kanit', sans-serif; }
    .game-card {
        background: linear-gradient(135deg, #ff7f00, #ff9500);
        box-shadow: 0 8px 32px rgba(255, 127, 0, 0.3);
    }
    .word-slot {
        background: rgba(255, 255, 255, 0.9);
        border: 3px dashed #ff7f00;
        transition: all 0.3s ease;
        min-width: 120px;
        height: 56px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: 600;
        color: #c05621;
        user-select: none;
        cursor: pointer;
    }
    .word-slot.filled {
        background: #fff;
        border: 3px solid #ff7f00;
        box-shadow: 0 4px 12px rgba(255, 127, 0, 0.2);
    }
    .word-option {
        background: linear-gradient(135deg, #ffb366, #ff9500);
        cursor: grab;
        transition: all 0.3s ease;
        user-select: none;
        padding: 10px 16px;
        border-radius: 12px;
        font-weight: 600;
        color: white;
        box-shadow: 0 4px 8px rgba(255, 127, 0, 0.6);
    }
    .word-option:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(255, 127, 0, 0.8);
    }
    .word-option.dragging {
        opacity: 0.5;
        transform: rotate(5deg);
    }
    .correct-effect {
        animation: correctPulse 0.6s ease-in-out;
    }
    .wrong-effect {
        animation: wrongShake 0.6s ease-in-out;
    }
    @keyframes correctPulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); background-color: #10b981; }
        100% { transform: scale(1); }
    }
    @keyframes wrongShake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-10px); background-color: #ef4444; }
        75% { transform: translateX(10px); background-color: #ef4444; }
    }
    .timer-warning {
        animation: timerBlink 1s infinite;
    }
    @keyframes timerBlink {
        0%, 50% { color: #ef4444; }
        51%, 100% { color: #ff7f00; }
    }
    .score-popup {
        animation: scoreFloat 1s ease-out;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 3rem;
        font-weight: 700;
        z-index: 50;
        pointer-events: none;
    }
    @keyframes scoreFloat {
        0% { transform: translateY(0) scale(1); opacity: 1; }
        100% { transform: translateY(-50px) scale(1.2); opacity: 0; }
    }
</style>
</head>
<body class="bg-gradient-to-br from-orange-100 to-orange-200 min-h-screen">

<!-- Header -->
<div class="bg-gradient-to-r from-orange-500 to-orange-600 text-white p-4 shadow-lg">
    <div class="container mx-auto flex justify-between items-center">
        <h1 class="text-3xl font-bold">üèÜ ‡πÄ‡∏Å‡∏°‡∏Ñ‡∏≥‡∏£‡∏≤‡∏ä‡∏≤‡∏®‡∏±‡∏û‡∏ó‡πå</h1>
        <div class="flex items-center space-x-6">
            <div class="text-center">
                <div class="text-sm opacity-90">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                <div id="score" class="text-2xl font-bold">0</div>
            </div>
            <div class="text-center">
                <div class="text-sm opacity-90">‡πÄ‡∏ß‡∏•‡∏≤</div>
                <div id="timer" class="text-2xl font-bold">60</div>
            </div>
            <div class="text-center">
                <div class="text-sm opacity-90">‡∏£‡∏∞‡∏î‡∏±‡∏ö</div>
                <div id="level" class="text-2xl font-bold">1</div>
            </div>
        </div>
    </div>
</div>

<!-- Game Area -->
<div class="container mx-auto p-6">
    <!-- Game Card -->
    <div class="game-card rounded-2xl p-8 mb-6 text-white">
        <div class="text-center mb-6">
            <h2 class="text-2xl font-semibold mb-2">‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Ñ‡∏≥‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</h2>
            <p class="opacity-90">‡∏•‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</p>
        </div>

        <!-- Word Slots -->
        <div id="wordSlots" class="flex flex-wrap justify-center gap-3 mb-8 min-h-[80px]">
            <!-- Slots generated dynamically -->
        </div>

        <!-- Word Options -->
        <div class="bg-white bg-opacity-20 rounded-xl p-6">
            <h3 class="text-lg font-semibold mb-4 text-center">‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ</h3>
            <div id="wordOptions" class="flex flex-wrap justify-center gap-3">
                <!-- Word options generated dynamically -->
            </div>
        </div>
    </div>

    <!-- Leaderboard -->
    <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
        <h3 class="text-2xl font-bold text-orange-600 mb-4 text-center">üèÖ ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h3>
        <div id="leaderboard" class="space-y-2">
            <!-- Leaderboard content -->
        </div>
    </div>

    <!-- Credits -->
    <div class="bg-gradient-to-r from-orange-400 to-orange-500 text-white rounded-2xl p-6 text-center">
        <h3 class="text-xl font-bold mb-3">üë®‚Äçüíª ‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á</h3>
        <div class="grid md:grid-cols-3 gap-4">
            <div class="bg-white bg-opacity-20 rounded-lg p-3">
                <div class="font-semibold">‡∏ô‡∏≤‡∏¢ ‡∏ô‡∏¥‡∏û‡∏¥‡∏ê‡∏û‡∏ô‡∏ò‡πå ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå</div>
                <div class="text-sm opacity-90">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà 38</div>
            </div>
            <div class="bg-white bg-opacity-20 rounded-lg p-3">
                <div class="font-semibold">‡∏ô‡∏≤‡∏¢ ‡∏õ‡∏Å‡∏£‡∏ì‡πå ‡∏Å‡∏≠‡∏á‡∏≠‡∏∏‡∏ö‡∏•</div>
                <div class="text-sm opacity-90">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà 11</div>
            </div>
            <div class="bg-white bg-opacity-20 rounded-lg p-3">
                <div class="font-semibold">‡∏ô‡∏≤‡∏¢ ‡∏£‡∏±‡∏ê‡∏†‡∏π‡∏°‡∏¥ ‡∏®‡∏¥‡∏£‡∏¥‡∏ô‡∏≤‡∏°</div>
                <div class="text-sm opacity-90">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà 23</div>
            </div>
        </div>
        <div class="mt-3 text-sm opacity-90">‡∏°.5/5</div>
    </div>
</div>

<!-- Game Over Modal -->
<div id="gameOverModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white rounded-2xl p-8 max-w-md mx-4 text-center">
        <h2 class="text-3xl font-bold text-orange-600 mb-4">üéâ ‡πÄ‡∏Å‡∏°‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß!</h2>
        <div class="text-6xl mb-4">üèÜ</div>
        <p class="text-xl mb-2">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: <span id="finalScore" class="font-bold text-orange-600">0</span></p>
        <p class="text-lg mb-6">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: <span id="finalLevel" class="font-bold text-orange-600">1</span></p>
        <button onclick="restartGame()" class="bg-gradient-to-r from-orange-500 to-orange-600 text-white px-8 py-3 rounded-full font-semibold hover:from-orange-600 hover:to-orange-700 transition-all">
            üîÑ ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà
        </button>
    </div>
</div>

<script>
    // Game data
    const sentences = [
        { words: ['‡∏û‡∏£‡∏∞‡∏ö‡∏≤‡∏ó', '‡∏™‡∏°‡πÄ‡∏î‡πá‡∏à', '‡∏û‡∏£‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏±‡∏ß'], meaning: '‡∏û‡∏£‡∏∞‡∏°‡∏´‡∏≤‡∏Å‡∏©‡∏±‡∏ï‡∏£‡∏¥‡∏¢‡πå' },
        { words: ['‡∏ó‡∏£‡∏á', '‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏ä‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô'], meaning: '‡πÄ‡∏™‡∏î‡πá‡∏à' },
        { words: ['‡πÄ‡∏™‡∏î‡πá‡∏à', '‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏ä‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô', '‡πÑ‡∏õ'], meaning: '‡πÑ‡∏õ‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£' },
        { words: ['‡∏ó‡∏£‡∏á', '‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏ä‡∏ó‡∏≤‡∏ô'], meaning: '‡πÉ‡∏´‡πâ' },
        { words: ['‡∏£‡∏±‡∏ö‡∏™‡∏±‡πà‡∏á', '‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏ä‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢'], meaning: '‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à' },
        { words: ['‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏ä', '‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå'], meaning: '‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£' },
        { words: ['‡∏ó‡∏£‡∏á', '‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏ä‡∏ô‡∏¥‡∏û‡∏ô‡∏ò‡πå'], meaning: '‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô' },
        { words: ['‡πÄ‡∏ù‡πâ‡∏≤', '‡∏ó‡∏π‡∏•‡∏•‡∏∞‡∏≠‡∏≠‡∏á‡∏ò‡∏∏‡∏•‡∏µ‡∏û‡∏£‡∏∞‡∏ö‡∏≤‡∏ó'], meaning: '‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ù‡πâ‡∏≤' },
        { words: ['‡∏ó‡∏π‡∏•', '‡πÄ‡∏Å‡∏•‡πâ‡∏≤', '‡∏ó‡∏π‡∏•', '‡∏Å‡∏£‡∏∞‡∏´‡∏°‡πà‡∏≠‡∏°'], meaning: '‡∏Å‡∏£‡∏≤‡∏ö‡∏ó‡∏π‡∏•' },
        { words: ['‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏ä', '‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï'], meaning: '‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï' }
    ];

    let currentSentence = {};
    let score = 0;
    let level = 1;
    let timeLeft = 60;
    let gameTimer;
    let usedSentences = [];
    let leaderboardData = JSON.parse(localStorage.getItem('leaderboard')) || [];

    // Initialize game
    function initGame() {
        updateDisplay();
        updateLeaderboard();
        startTimer();
        loadNewSentence();
    }

    // Load new sentence
    function loadNewSentence() {
        // Filter out used sentences
        let availableIndices = sentences.map((_, i) => i).filter(i => !usedSentences.includes(i));
        if (availableIndices.length === 0) {
            usedSentences = [];
            availableIndices = sentences.map((_, i) => i);
        }
        const randomIndex = availableIndices[Math.floor(Math.random() * availableIndices.length)];
        usedSentences.push(randomIndex);
        currentSentence = JSON.parse(JSON.stringify(sentences[randomIndex]));
        // Shuffle words for options
        currentSentence.shuffledWords = [...currentSentence.words].sort(() => Math.random() - 0.5);
        renderGame();
    }

    // Render game elements
    function renderGame() {
        const slotsContainer = document.getElementById('wordSlots');
        const optionsContainer = document.getElementById('wordOptions');
        slotsContainer.innerHTML = '';
        optionsContainer.innerHTML = '';

        // Create slots (empty)
        currentSentence.words.forEach((word, index) => {
            const slot = document.createElement('div');
            slot.className = 'word-slot rounded-lg';
            slot.dataset.index = index;
            slot.textContent = '';
            slot.addEventListener('dragover', e => e.preventDefault());
            slot.addEventListener('drop', handleDrop);
            slot.addEventListener('click', removeWordFromSlot);
            slotsContainer.appendChild(slot);
        });

        // Create word options (draggable)
        currentSentence.shuffledWords.forEach(word => {
            const option = document.createElement('div');
            option.className = 'word-option rounded-lg';
            option.textContent = word;
            option.draggable = true;
            option.dataset.word = word;
            option.addEventListener('dragstart', handleDragStart);
            option.addEventListener('dragend', handleDragEnd);
            optionsContainer.appendChild(option);
        });
    }

    // Drag and drop handlers
    let draggedElement = null;

    function handleDragStart(e) {
        draggedElement = e.target;
        e.target.classList.add('dragging');
    }

    function handleDragEnd(e) {
        e.target.classList.remove('dragging');
    }

    function handleDrop(e) {
        e.preventDefault();
        const slot = e.target.closest('.word-slot');
        if (!slot) return;
        if (!draggedElement) return;

        // If slot already filled, reject drop
        if (slot.classList.contains('filled')) return;

        // Put word in slot
        slot.textContent = draggedElement.dataset.word;
        slot.classList.add('filled');

        // Hide dragged word option
        draggedElement.style.display = 'none';

        // Check sentence
        checkSentence();
    }

    // Remove word from slot and restore option
    function removeWordFromSlot(e) {
        const slot = e.currentTarget;
        if (!slot.classList.contains('filled')) return;
        const word = slot.textContent;
        slot.textContent = '';
        slot.classList.remove('filled');

        // Show the corresponding option back
        const options = document.querySelectorAll('.word-option');
        options.forEach(option => {
            if (option.dataset.word === word && option.style.display === 'none') {
                option.style.display = 'block';
            }
        });
    }

    // Check if sentence is correct
    function checkSentence() {
        const slots = document.querySelectorAll('.word-slot');
        const userSentence = Array.from(slots).map(slot => slot.textContent.trim());
        if (userSentence.some(word => !word)) return; // ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á

        const isCorrect = userSentence.every((word, idx) => word === currentSentence.words[idx]);
        if (isCorrect) {
            handleCorrectAnswer();
        } else {
            handleWrongAnswer();
        }
    }

    // Handle correct answer
    function handleCorrectAnswer() {
        const gameCard = document.querySelector('.game-card');
        gameCard.classList.add('correct-effect');
        const timeBonus = Math.max(0, timeLeft - 30);
        const levelBonus = level * 10;
        const totalPoints = 100 + timeBonus + levelBonus;
        score += totalPoints;
        level++;
        showScorePopup(`+${totalPoints}`, 'correct');
        setTimeout(() => {
            gameCard.classList.remove('correct-effect');
            updateDisplay();
            loadNewSentence();
        }, 1000);
    }

    // Handle wrong answer
    function handleWrongAnswer() {
        const gameCard = document.querySelector('.game-card');
        gameCard.classList.add('wrong-effect');
        score = Math.max(0, score - 20);
        showScorePopup('-20', 'wrong');
        setTimeout(() => {
            gameCard.classList.remove('wrong-effect');
            updateDisplay();
            resetCurrentSentence();
        }, 1000);
    }

    // Reset current sentence slots and show all options
    function resetCurrentSentence() {
        const slots = document.querySelectorAll('.word-slot');
        const options = document.querySelectorAll('.word-option');
        slots.forEach(slot => {
           
